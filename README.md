# Lizard-Alerts
setting up text alerts to a live video feed for when the lizard moves

Requirements to Run- ngrok, running ngrok tunnel to localhost, picamera, http, gpiozero, requests, twilio library and account

Summary- My friend was going away for the week and wanted me to watch her lizard. I noticed that the lizard (Tracy) was usually content in staying in one of his two caves and didn't come out often. I wanted a fun way of knowing when he was out of his cave and wanting a text of him on the move every time it happened. First, I set up a distance sensor pointed at the intersection where the lizard crosses between the two caves. From the top to the bottom of the tank was roughly 29 centimeters, so I set it such that when the distance is less than 28 it would mean the lizard must be there. Because the lizard is slow, I used sleep() to have it check once every three seconds or so. I also used datetime objects to make sure that if he parked himself in the middle of his tank, it would wait 5 minutes before sending another notification. Next I set up my picamera to take a picture of him and store it whenever he tripped the distance sensor. Next issue was sending a text with my trial Twilio account. Normally you can send images by including them in the "media" parameter when sending a texts, but when using a simplehttp (python library for setting up basic http server) server the texts didn't go through. The link worked in my browser on a seperate machine, and image links to pictures I found on Google worked, so I imagined for some reason Twilio services didn't like the simplehttp url. I ended up changning my approach so instead of taking a picture, I would use code from the picamera documentation to stream video of the inside of the tank on localhost and then use ngrok to provide a tunnel from localhost to a real url. Because my ngrok account is also not premium, the url changes each time I open the tunnel. I then save the generated url into lizard.py so it can pass the website name as a parameter to smshandler, which includes the link in the body of the text with a fun quip.

Shortcomings and Possible Improvements My first issue was how to get the fields I needed from the beautifulsoup object, which contained the HTML. My stradegies involved trying to gather the information back into a json file and writing my own grammar to create a data structure with the data I needed, but these failed because I could not find where the json file began and ended and there were too many unique cases for my own grammar to work. Another solution I discovered after was using a regex, and while this might be the best tool for the job, I am not currently comfortable enough with it to use it in this project. Instead, I created a list of my desired fields and searched for them in large strings that were in the HTML tags. This process taught me a lot about tackling large scale, difficult problems and the BeautifulSoup library. Next was graphing the data, which required me to remember and learn a ton of new tools in seaborn, pandas, and matplotlib. Because of the difference of sizes and prestige to each tournament, it was difficult to find a numerical way to rank them. I didn't want to ignore certain outlier results, but including them in the graph scale made it harder to intrepret the data. If I were to improve this project, I would include more graphs that would show zoomed in versions of previous graphs that were more difficult to understand. The information I got was just from the results page, but I also figured out I could use the urls found in the results page to go to the results page of each specific tournament and find a ton more data. I didn't want to do this with this project because I felt the amount of data was unnecessary and it would involving scraping hundreds of web pages which would drastically increase runtime. This might be a cool addition in the future if I can come up with creative ways to display the new information. Lastly, the color scheme isn't perfect, and while I personally love the yellow/black/rainbow color scheme, I think adapting the color of some parts of the graph would make it more appealing to a wider audience.

Directions- open ngrok tunnel to localhost 8000, then copy url generated and put it as the CURRENT_NGROK variable in lizard.py. Run rpi.py then lizaard.py.
